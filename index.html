<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Board - Angelo</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .task-card {
            @apply bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-shadow duration-200 cursor-move;
        }
        .kanban-column {
            @apply bg-gray-50 rounded-lg p-4 min-h-96;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function TaskCard({ task, onDelete }) {
            return (
                <div className="task-card mb-3">
                    <div className="flex items-start justify-between mb-2">
                        <h3 className="font-medium text-gray-900 text-sm">{task.title}</h3>
                        <span className={`w-2 h-2 rounded-full ml-2 ${
                            task.priority === 'high' ? 'bg-red-500' :
                            task.priority === 'medium' ? 'bg-yellow-500' : 'bg-green-500'
                        }`}></span>
                    </div>
                    {task.description && (
                        <p className="text-gray-600 text-xs mb-2">{task.description}</p>
                    )}
                    {task.assignee && (
                        <div className="text-xs text-gray-500 mb-2">ðŸ‘¤ {task.assignee}</div>
                    )}
                    <div className="flex justify-end">
                        <button 
                            onClick={() => onDelete(task.id)}
                            className="text-xs text-red-600 hover:text-red-800"
                        >
                            Delete
                        </button>
                    </div>
                </div>
            );
        }

        function KanbanColumn({ title, tasks, status, onAddTask, onDeleteTask, color }) {
            return (
                <div className="flex-1 min-w-80">
                    <div className="kanban-column">
                        <div className="flex items-center justify-between mb-4">
                            <div className="flex items-center space-x-2">
                                <div className="w-3 h-3 rounded-full" style={{backgroundColor: color}}></div>
                                <h2 className="font-semibold text-gray-900 text-sm">{title}</h2>
                                <span className="bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-xs">
                                    {tasks.length}
                                </span>
                            </div>
                            <button 
                                onClick={() => onAddTask(status)}
                                className="p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-md"
                            >
                                +
                            </button>
                        </div>
                        
                        <div className="space-y-3">
                            {tasks.map(task => (
                                <TaskCard 
                                    key={task.id} 
                                    task={task} 
                                    onDelete={onDeleteTask}
                                />
                            ))}
                            {tasks.length === 0 && (
                                <div className="text-center py-8 text-gray-400">
                                    <div className="text-sm">No tasks</div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function TaskForm({ isOpen, onClose, onSubmit }) {
            const [formData, setFormData] = useState({
                title: '',
                description: '',
                priority: 'medium',
                assignee: ''
            });

            if (!isOpen) return null;

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.title.trim()) {
                    onSubmit({
                        ...formData,
                        id: Date.now().toString(),
                        createdAt: new Date()
                    });
                    setFormData({ title: '', description: '', priority: 'medium', assignee: '' });
                    onClose();
                }
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-lg shadow-xl max-w-md w-full">
                        <div className="p-6">
                            <h2 className="text-lg font-semibold text-gray-900 mb-4">Add New Task</h2>
                            <form onSubmit={handleSubmit} className="space-y-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Title *</label>
                                    <input
                                        type="text"
                                        required
                                        value={formData.title}
                                        onChange={(e) => setFormData({...formData, title: e.target.value})}
                                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                        placeholder="Enter task title"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                    <textarea
                                        value={formData.description}
                                        onChange={(e) => setFormData({...formData, description: e.target.value})}
                                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 h-20 resize-none"
                                        placeholder="Enter task description"
                                    />
                                </div>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                                        <select
                                            value={formData.priority}
                                            onChange={(e) => setFormData({...formData, priority: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="low">Low</option>
                                            <option value="medium">Medium</option>
                                            <option value="high">High</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">Assignee</label>
                                        <input
                                            type="text"
                                            value={formData.assignee}
                                            onChange={(e) => setFormData({...formData, assignee: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"
                                            placeholder="Assigned to"
                                        />
                                    </div>
                                </div>
                                
                                <div className="flex justify-end space-x-3 pt-4">
                                    <button
                                        type="button"
                                        onClick={onClose}
                                        className="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        type="submit"
                                        className="px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors"
                                    >
                                        Create Task
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            );
        }

        function TaskBoard() {
            const [tasks, setTasks] = useState(() => {
                const saved = localStorage.getItem('task-board-tasks');
                return saved ? JSON.parse(saved) : [
                    {
                        id: 'demo-1',
                        title: 'Sprint 1 Setup',
                        description: 'Initial task board setup and testing',
                        priority: 'high',
                        assignee: 'Angelo',
                        status: 'done',
                        createdAt: new Date()
                    },
                    {
                        id: 'demo-2', 
                        title: 'Pipeline Bot Core Infrastructure',
                        description: 'Set up bot framework, Slack integration, and database schema',
                        priority: 'high',
                        assignee: 'Alfred',
                        status: 'in-progress',
                        createdAt: new Date()
                    },
                    {
                        id: 'demo-3',
                        title: 'Sales Room Chat Interface',
                        description: 'Build conversational sales experience for prospects',
                        priority: 'medium',
                        assignee: 'Alfred',
                        status: 'todo',
                        createdAt: new Date()
                    }
                ];
            });
            const [showForm, setShowForm] = useState(false);
            const [targetStatus, setTargetStatus] = useState('todo');

            useEffect(() => {
                localStorage.setItem('task-board-tasks', JSON.stringify(tasks));
            }, [tasks]);

            const columns = [
                { id: 'backlog', title: 'Backlog', color: '#6b7280' },
                { id: 'todo', title: 'To Do', color: '#3b82f6' },
                { id: 'in-progress', title: 'In Progress', color: '#f59e0b' },
                { id: 'review', title: 'Review', color: '#8b5cf6' },
                { id: 'done', title: 'Done', color: '#10b981' }
            ];

            const handleAddTask = (status) => {
                setTargetStatus(status);
                setShowForm(true);
            };

            const handleSubmitTask = (taskData) => {
                setTasks(prev => [...prev, { ...taskData, status: targetStatus }]);
            };

            const handleDeleteTask = (taskId) => {
                if (confirm('Are you sure you want to delete this task?')) {
                    setTasks(prev => prev.filter(task => task.id !== taskId));
                }
            };

            const getTasksByStatus = (status) => {
                return tasks.filter(task => task.status === status);
            };

            return (
                <div className="h-screen bg-gray-100">
                    <div className="bg-white border-b border-gray-200 p-4">
                        <div className="flex items-center justify-between">
                            <div>
                                <h1 className="text-2xl font-bold text-gray-900">Task Board</h1>
                                <p className="text-gray-600">Manage your tasks efficiently</p>
                            </div>
                            <div className="flex space-x-3">
                                <button 
                                    onClick={() => {
                                        const demoTasks = [
                                            {
                                                id: 'demo-1',
                                                title: 'Sprint 1 Setup âœ…',
                                                description: 'Initial task board setup and testing',
                                                priority: 'high',
                                                assignee: 'Angelo',
                                                status: 'done',
                                                createdAt: new Date()
                                            },
                                            {
                                                id: 'demo-2', 
                                                title: 'Pipeline Bot Core Infrastructure',
                                                description: 'Set up bot framework, Slack integration, and database schema',
                                                priority: 'high',
                                                assignee: 'Alfred',
                                                status: 'in-progress',
                                                createdAt: new Date()
                                            },
                                            {
                                                id: 'demo-3',
                                                title: 'Sales Room Chat Interface',
                                                description: 'Build conversational sales experience for prospects',
                                                priority: 'medium',
                                                assignee: 'Alfred',
                                                status: 'todo',
                                                createdAt: new Date()
                                            }
                                        ];
                                        setTasks(demoTasks);
                                    }}
                                    className="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
                                >
                                    ðŸ“‹ Demo Tasks
                                </button>
                                <button 
                                    onClick={() => handleAddTask('todo')}
                                    className="px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors"
                                >
                                    + Add Task
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="flex-1 p-4 overflow-x-auto">
                        <div className="flex space-x-6 min-w-max">
                            {columns.map(column => (
                                <KanbanColumn
                                    key={column.id}
                                    title={column.title}
                                    status={column.id}
                                    tasks={getTasksByStatus(column.id)}
                                    color={column.color}
                                    onAddTask={handleAddTask}
                                    onDeleteTask={handleDeleteTask}
                                />
                            ))}
                        </div>
                    </div>

                    <TaskForm
                        isOpen={showForm}
                        onClose={() => setShowForm(false)}
                        onSubmit={handleSubmitTask}
                    />
                </div>
            );
        }

        ReactDOM.render(<TaskBoard />, document.getElementById('root'));
    </script>
</body>
</html>